# ğŸ”‘ SSH å¯†é’¥é…ç½®å›¾è§£æ•™ç¨‹

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†è®© GitHub Actions èƒ½å¤Ÿè‡ªåŠ¨éƒ¨ç½²ä½ çš„åšå®¢åˆ° `dandingbobaishi.github.io`ï¼Œéœ€è¦é…ç½® SSH å¯†é’¥ã€‚

**ç®€å•ç†è§£**ï¼š
- ğŸ” **ç§é’¥**ï¼ˆDEPLOY_KEYï¼‰ï¼šæ”¾åœ¨æºç ä»“åº“ï¼Œç”¨äº"ç­¾å"
- ğŸ”“ **å…¬é’¥**ï¼ˆDeploy Keyï¼‰ï¼šæ”¾åœ¨ Pages ä»“åº“ï¼Œç”¨äº"éªŒè¯"

---

## ğŸ¯ ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆ SSH å¯†é’¥å¯¹

### Windows ç”¨æˆ·

1. æ‰“å¼€ **Git Bash** æˆ– **PowerShell**
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```bash
   cd F:/MyBlog/mizuki
   ```

3. è¿è¡Œç”Ÿæˆå‘½ä»¤ï¼š
   ```bash
   ssh-keygen -t rsa -b 4096 -C "your_email@example.com" -f mizuki-deploy-key -N ""
   ```

### å‘½ä»¤è§£é‡Š

- `-t rsa`: ä½¿ç”¨ RSA ç®—æ³•
- `-b 4096`: å¯†é’¥é•¿åº¦ 4096 ä½
- `-C "your_email@example.com"`: æ³¨é‡Šï¼ˆå¯ä»¥æ˜¯ä»»ä½•æ–‡æœ¬ï¼‰
- `-f mizuki-deploy-key`: è¾“å‡ºæ–‡ä»¶å
- `-N ""`: ä¸è®¾ç½®å¯†ç ï¼ˆé‡è¦ï¼ï¼‰

### ç”Ÿæˆç»“æœ

ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š

```
mizuki/
â”œâ”€â”€ mizuki-deploy-key       â† ç§é’¥ï¼ˆä¸è¦åˆ†äº«ï¼ï¼‰
â””â”€â”€ mizuki-deploy-key.pub   â† å…¬é’¥
```

---

## ğŸ”“ ç¬¬äºŒæ­¥ï¼šé…ç½®å…¬é’¥åˆ° Pages ä»“åº“

### 1. å¤åˆ¶å…¬é’¥å†…å®¹

æ‰“å¼€ `mizuki-deploy-key.pub` æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ã€‚

å†…å®¹ç±»ä¼¼ï¼š
```
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... your_email@example.com
```

### 2. æ‰“å¼€ Pages ä»“åº“è®¾ç½®

è®¿é—®ï¼š
```
https://github.com/dandingbobaishi/dandingbobaishi.github.io/settings/keys
```

æˆ–è€…ï¼š
1. æ‰“å¼€ https://github.com/dandingbobaishi/dandingbobaishi.github.io
2. ç‚¹å‡» **Settings** æ ‡ç­¾
3. å·¦ä¾§èœå•æ‰¾åˆ° **Deploy keys**

### 3. æ·»åŠ  Deploy Key

ç‚¹å‡»å³ä¸Šè§’çš„ **Add deploy key** æŒ‰é’®

### 4. å¡«å†™ä¿¡æ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add new                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Title                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ MIZUKI_DEPLOY_KEY                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Key                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ssh-rsa AAAAB3NzaC1yc2EAAAADAQAB... â”‚ â”‚
â”‚ â”‚ (ç²˜è´´ mizuki-deploy-key.pub çš„å†…å®¹) â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ â˜‘ Allow write access                   â”‚ â† å¿…é¡»å‹¾é€‰ï¼
â”‚                                         â”‚
â”‚ [ Add key ]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é‡è¦**ï¼š
- âœ… Title å¯ä»¥è‡ªå®šä¹‰ï¼Œå»ºè®®ç”¨ `MIZUKI_DEPLOY_KEY`
- âœ… Key ç²˜è´´ `mizuki-deploy-key.pub` çš„å®Œæ•´å†…å®¹
- âœ… **å¿…é¡»å‹¾é€‰** "Allow write access"

### 5. ç‚¹å‡» Add key

å¦‚æœéœ€è¦ï¼Œè¾“å…¥ GitHub å¯†ç ç¡®è®¤ã€‚

---

## ğŸ” ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç§é’¥åˆ°æºç ä»“åº“

### 1. å¤åˆ¶ç§é’¥å†…å®¹

æ‰“å¼€ `mizuki-deploy-key` æ–‡ä»¶ï¼ˆ**æ²¡æœ‰** .pub åç¼€ï¼‰ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ã€‚

å†…å®¹ç±»ä¼¼ï¼š
```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAACFwAAAAdzc2gtcn
...ï¼ˆå¾ˆå¤šè¡Œï¼‰...
-----END OPENSSH PRIVATE KEY-----
```

âš ï¸ **æ³¨æ„**ï¼š
- å¿…é¡»åŒ…å«å¼€å¤´çš„ `-----BEGIN OPENSSH PRIVATE KEY-----`
- å¿…é¡»åŒ…å«ç»“å°¾çš„ `-----END OPENSSH PRIVATE KEY-----`
- å¤åˆ¶æ—¶ä¸è¦æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–æ¢è¡Œ

### 2. æ‰“å¼€æºç ä»“åº“è®¾ç½®

è®¿é—®ä½ çš„æºç ä»“åº“ï¼ˆå­˜æ”¾ Mizuki ä»£ç çš„ä»“åº“ï¼‰ï¼Œä¾‹å¦‚ï¼š
```
https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„æºç ä»“åº“/settings/secrets/actions
```

æˆ–è€…ï¼š
1. æ‰“å¼€ä½ çš„æºç ä»“åº“
2. ç‚¹å‡» **Settings** æ ‡ç­¾
3. å·¦ä¾§èœå•ï¼š**Secrets and variables** â†’ **Actions**

### 3. æ·»åŠ  Secret

ç‚¹å‡»å³ä¸Šè§’çš„ **New repository secret** æŒ‰é’®

### 4. å¡«å†™ä¿¡æ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Actions secrets / New secret            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name *                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ DEPLOY_KEY                          â”‚ â”‚ â† å¿…é¡»æ˜¯è¿™ä¸ªåå­—ï¼
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Secret *                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ -----BEGIN OPENSSH PRIVATE KEY----- â”‚ â”‚
â”‚ â”‚ b3BlbnNzaC1rZXktdjEAAAAA...        â”‚ â”‚
â”‚ â”‚ (ç²˜è´´ mizuki-deploy-key çš„å†…å®¹)     â”‚ â”‚
â”‚ â”‚ -----END OPENSSH PRIVATE KEY-----   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ [ Add secret ]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é‡è¦**ï¼š
- âœ… Name **å¿…é¡»**æ˜¯ `DEPLOY_KEY`ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰
- âœ… Secret ç²˜è´´ `mizuki-deploy-key` çš„å®Œæ•´å†…å®¹ï¼ˆç§é’¥ï¼‰
- âœ… ç¡®ä¿åŒ…å«å¼€å¤´å’Œç»“å°¾çš„æ ‡è®°è¡Œ

### 5. ç‚¹å‡» Add secret

---

## ğŸ—‘ï¸ ç¬¬å››æ­¥ï¼šåˆ é™¤æœ¬åœ°å¯†é’¥æ–‡ä»¶

é…ç½®å®Œæˆåï¼Œ**ç«‹å³åˆ é™¤**æœ¬åœ°çš„å¯†é’¥æ–‡ä»¶ä»¥ç¡®ä¿å®‰å…¨ï¼š

### Windows

```bash
del mizuki-deploy-key
del mizuki-deploy-key.pub
```

### Linux/Mac

```bash
rm mizuki-deploy-key
rm mizuki-deploy-key.pub
```

âš ï¸ **ä¸ºä»€ä¹ˆè¦åˆ é™¤**ï¼š
- ç§é’¥éå¸¸æ•æ„Ÿï¼Œä¸åº”è¯¥ä¿å­˜åœ¨æœ¬åœ°
- é˜²æ­¢æ„å¤–æäº¤åˆ° Git ä»“åº“
- GitHub å·²ç»å®‰å…¨ä¿å­˜äº†å¯†é’¥

---

## âœ… éªŒè¯é…ç½®

### æ£€æŸ¥æ¸…å•

- [ ] Pages ä»“åº“æœ‰ Deploy Keyï¼ˆå…¬é’¥ï¼‰
  - è®¿é—®ï¼šhttps://github.com/dandingbobaishi/dandingbobaishi.github.io/settings/keys
  - åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåä¸º `MIZUKI_DEPLOY_KEY` çš„å¯†é’¥
  - âœ… "Allow write access" å·²å‹¾é€‰

- [ ] æºç ä»“åº“æœ‰ DEPLOY_KEYï¼ˆç§é’¥ï¼‰
  - è®¿é—®ï¼šä½ çš„æºç ä»“åº“ â†’ Settings â†’ Secrets and variables â†’ Actions
  - åº”è¯¥çœ‹åˆ°ä¸€ä¸ªåä¸º `DEPLOY_KEY` çš„ secret

- [ ] æœ¬åœ°å¯†é’¥æ–‡ä»¶å·²åˆ é™¤
  - `mizuki-deploy-key` ä¸å­˜åœ¨
  - `mizuki-deploy-key.pub` ä¸å­˜åœ¨

---

## ğŸš€ æµ‹è¯•éƒ¨ç½²

### 1. æ¨é€ä»£ç 

```bash
cd mizuki
git add .
git commit -m "Test deployment"
git push origin master
```

### 2. æŸ¥çœ‹ Actions

1. æ‰“å¼€æºç ä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. åº”è¯¥çœ‹åˆ° "Auto Deploy Mizuki Blog to GitHub Pages" å·¥ä½œæµæ­£åœ¨è¿è¡Œ

### 3. ç­‰å¾…å®Œæˆ

- é€šå¸¸éœ€è¦ 2-5 åˆ†é’Ÿ
- ç»¿è‰² âœ… è¡¨ç¤ºæˆåŠŸ
- çº¢è‰² âŒ è¡¨ç¤ºå¤±è´¥ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰

### 4. è®¿é—®åšå®¢

æ‰“å¼€ https://dandingbobaishi.github.io/ æŸ¥çœ‹æ•ˆæœ

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æç¤º "Permission denied (publickey)"

**åŸå› **ï¼šç§é’¥é…ç½®ä¸æ­£ç¡®

**è§£å†³**ï¼š
1. æ£€æŸ¥ DEPLOY_KEY çš„å†…å®¹æ˜¯å¦å®Œæ•´
2. ç¡®ä¿åŒ…å«å¼€å¤´å’Œç»“å°¾çš„æ ‡è®°è¡Œ
3. é‡æ–°ç”Ÿæˆå¯†é’¥å¹¶é…ç½®

### Q2: æç¤º "Host key verification failed"

**åŸå› **ï¼šå…¬é’¥é…ç½®ä¸æ­£ç¡®

**è§£å†³**ï¼š
1. æ£€æŸ¥ Deploy Key æ˜¯å¦æ·»åŠ æˆåŠŸ
2. ç¡®è®¤å‹¾é€‰äº† "Allow write access"
3. æ£€æŸ¥å…¬é’¥å†…å®¹æ˜¯å¦å®Œæ•´

### Q3: Actions è¿è¡Œå¤±è´¥

**åŸå› **ï¼šå¯èƒ½æ˜¯å¤šç§åŸå› 

**è§£å†³**ï¼š
1. æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯
2. æ£€æŸ¥ `.github/workflows/deploy.yml` é…ç½®
3. ç¡®è®¤ä»“åº“åœ°å€æ˜¯å¦æ­£ç¡®

### Q4: éƒ¨ç½²æˆåŠŸä½†ç½‘ç«™æ²¡æ›´æ–°

**åŸå› **ï¼šæµè§ˆå™¨ç¼“å­˜

**è§£å†³**ï¼š
1. æŒ‰ Ctrl+Shift+R å¼ºåˆ¶åˆ·æ–°
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
3. ç­‰å¾… 5-10 åˆ†é’Ÿ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Deploy Keys æ–‡æ¡£](https://docs.github.com/en/developers/overview/managing-deploy-keys)
- [GitHub Actions Secrets æ–‡æ¡£](https://docs.github.com/en/actions/security-guides/encrypted-secrets)
- [SSH å¯†é’¥ç”ŸæˆæŒ‡å—](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

---

## ğŸ’¡ å®‰å…¨æç¤º

1. âš ï¸ **æ°¸è¿œä¸è¦**å°†ç§é’¥æäº¤åˆ° Git ä»“åº“
2. âš ï¸ **æ°¸è¿œä¸è¦**åœ¨å…¬å¼€åœºåˆåˆ†äº«ç§é’¥
3. âœ… å®šæœŸæ›´æ¢å¯†é’¥ï¼ˆå»ºè®®æ¯å¹´ä¸€æ¬¡ï¼‰
4. âœ… å¦‚æœç§é’¥æ³„éœ²ï¼Œç«‹å³åˆ é™¤å¹¶é‡æ–°ç”Ÿæˆ

---

## ğŸ‰ å®Œæˆ

é…ç½®å®Œæˆåï¼Œä½ å°±å¯ä»¥ï¼š

1. ä¿®æ”¹åšå®¢å†…å®¹
2. è¿è¡Œ `deploy.bat` æˆ–æ‰‹åŠ¨æ¨é€
3. GitHub Actions è‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²
4. å‡ åˆ†é’Ÿåç½‘ç«™è‡ªåŠ¨æ›´æ–°

äº«å—è‡ªåŠ¨åŒ–éƒ¨ç½²çš„ä¾¿åˆ©å§ï¼ğŸš€
